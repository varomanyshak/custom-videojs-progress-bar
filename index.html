<!DOCTYPE html>
<html>
<head>
  <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet" />
  <style>
    .vjs-progress-holder .vjs-play-progress,
    .vjs-progress-holder .vjs-load-progress {
      transform-origin: left;
    }
  </style>
</head>
<body>
  <video id="my-video" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264"
    data-setup='{}'>
    <source src="videoplayback.mp4" type="video/mp4">
    <p class="vjs-no-js">
      To view this video please enable JavaScript, and consider upgrading to a
      web browser that
      <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
    </p>
  </video>

  <script src="https://vjs.zencdn.net/7.14.3/video.js"></script>
  <script>
    var player = videojs('my-video');

    player.ready(function() {
      var startTime = 20; // 3 minutes in seconds
      var endTime = 30; // 4 minutes in seconds
      var duration = endTime - startTime;

      // Start playback at the 3-minute mark
      player.currentTime(startTime);

      // Update the progress bar
      player.on('timeupdate', function() {
        var currentTime = player.currentTime();
        if (currentTime < startTime) {
          player.currentTime(startTime);
        } else if (currentTime > endTime) {
          player.currentTime(endTime);
          player.pause();
        }
      });

      // Adjust the progress bar display
      player.on('loadedmetadata', function() {
        var duration = endTime - startTime;
        var controlBar = player.controlBar;
        var progressControl = controlBar.progressControl;
        var seekBar = progressControl.seekBar;
        var loadProgressBar = seekBar.loadProgressBar;
        var playProgressBar = seekBar.playProgressBar;

        player.duration(duration);

        seekBar.on('mousedown', function(event) {
          event.preventDefault();
          var newTime = startTime + (event.offsetX / seekBar.width()) * duration;
          player.currentTime(newTime);
        });

        seekBar.on('mousemove', function(event) {
          if (event.buttons === 1) { // If the left mouse button is pressed
            var newTime = startTime + (event.offsetX / seekBar.width()) * duration;
            player.currentTime(newTime);
          }
        });

        seekBar.on('click', function(event) {
          event.preventDefault();
          var newTime = startTime + (event.offsetX / seekBar.width()) * duration;
          player.currentTime(newTime);
        });

        // Update the load and play progress bars
        player.on('timeupdate', function() {
          var currentTime = player.currentTime();
          var progress = (currentTime - startTime) / duration;
          playProgressBar.el().style.transform = 'scaleX(' + progress + ')';
          loadProgressBar.el().style.transform = 'scaleX(' + progress + ')';
        });
      });
    });
  </script>
</body>
</html>
